<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
<!-- REFACCIONES -->
    	<record id="website_support_inventory_view_form" model="ir.ui.view">
            <field name="name">website.support.inventory.form</field>
            <field name="model">website.support.inventory</field>
            <field name="arch" type="xml">
            	<form>
                    <header>
                        <button type="object" name="registar_entrada" string="Registrar Entrada" class="btn-primary"/>
                        <button type="object" name="registar_salida" string="Registrar Salida" class="btn-primary"/>
                    </header>
            		<sheet>
            			<div>
            				<field name="imagen" widget="image" class="oe_avatar"/>
            				<div class="oe_title">
            					<p>
            						<h2><field name="name" placeholder="Producto" required="1"/></h2>
                                    <field name="no_stock" invisible="1"/>
            					</p>
                                <table style="width:50%">
                                    <tr>
                                        <th style="text-align: center; width:30%;">Stock Minimo</th>
                                        <th style="text-align: center; width:30%;">Stock Faltante</th>
                                        <th style="text-align: center; font-size: 20px;">STOCK</th>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center; width:30%;"><field name="stock_min"/></td>
                                        <td style="text-align: center;  width:30%;"><field name="stock_diff" readonly="1"/></td>
                                        <td style="text-align: center; width:30%;"><field name="stock"/></td>
                                    </tr>
                                </table>
                            </div>
            			</div>
                        <group>
                            <notebook>
                                <page string="Entradas">
                                    <field name="input_ids" readonly="1">
                                        <tree editable="top">
                                            <field name="date"/>
                                            <field name="product_id" invisible="1"/>
                                            <field name="quantity" sum="Suma Entradas"/>
                                            <field name="note"/>
                                        </tree>
                                    </field>
                                </page>
                                <page string="Consumos">
                                    <field name="output_ids" readonly="1">
                                        <tree editable="top">
                                            <field name="report_id"/>
                                            <field name="quantity" sum="Suma Consumos"/>
                                            <field name="state" invisible="1"/>
                                        </tree>
                                    </field>
                                </page>
                                <page string="Salidas">
                                    <field name="transfer_ids" readonly="1">
                                        <tree editable="top">
                                            <field name="date"/>
                                            <field name="quantity" sum="Suma Transferencias"/>
                                            <field name="folio"/>
                                            <field name="transfer_id"/>
                                            <field name="note"/>
                                        </tree>
                                    </field>
                                </page>
                            </notebook>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="website_support_inventory_view_kandan" model="ir.ui.view">
            <field name="name">website.support.inventory.kanban.view</field>
            <field name="model">website.support.inventory</field>
            <field name="arch" type="xml">
                <kanban class="o_res_partner_kanban">
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click">
                                <div class="o_kanban_image">
                                    <img t-att-src="kanban_image('website.support.inventory', 'imagen', record.id.value)"/>
                                </div>
                                <div class="oe_kanban_details">
                                    <strong class="oe_partner_heading"><field name="name"/></strong>
                                    <ul><strong>Stock: <field name="stock"/></strong></ul>
                                    <ul attrs="{'invisible':[('stock_diff','=', 0)]}"><strong><font color="red">Faltante: <field name="stock_diff"/></font></strong></ul>
                                    <ul attrs="{'invisible':[('stock_diff','>', 0)]}"><strong>Faltante: <field name="stock_diff"/></strong></ul>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="website_support_inventory_view_tree" model="ir.ui.view">
            <field name="name">website.support.inventory.tree.view</field>
            <field name="model">website.support.inventory</field>
            <field name="arch" type="xml">
                <tree string="Inventario" colors="red:stock_diff>0">
                    <field name="name"/>
                    <field name="stock"/>
                    <field name="stock_diff"/>
                    <field name="no_stock" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="website_support_inventory_action" model="ir.actions.act_window">
            <field name="name">Refacciones</field>
            <field name="res_model">website.support.inventory</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="help" type="html">
                <p>No se encontro inventario</p>
            </field>
        </record>

       <!--  <record id="website_support_inventory_action_view_search" model="ir.ui.view">
            <field name="name">website.support.inventory.form.search</field>
            <field name="model">website.support.inventory</field>
            <field name="arch" type="xml">
                <search> -->
                    <!--<field name="partner_id"/>-->
                    <!--<filter string="Sin Stock" name="out_stock" domain="[('no_stock', '=', True)]"/>-->
                    <!--<filter string="Terminadas" name="attended_tickets" domain="[('unattended', '=', False )"/>-->
                    <!--<filter name="group_by_category" string="Area" domain="[]" context="{'group_by':'category'}"/>-->
                    <!--<filter name="group_by_user" string="Personal de Mantenimiento" domain="[]" context="{'group_by':'user_id'}"/>-->
                <!-- </search>
            </field>
        </record> -->

<!-- ENVIAR A COMPRAS -->
        <record id="website_support_inventory_purchase_view_form" model="ir.ui.view">
            <field name="name">website.support.inventory.purchase.form</field>
            <field name="model">website.support.inventory.purchase</field>
            <field name="arch" type="xml">
                <form string="Crear orden de Compra">
                    <separator colspan="4" string="Â¿Crear pedido de compra con las refacciones seleccionadas?"/>
                    <footer>
                        <button name="create_purchase_order" string="Confirmar" type="object"/>
                        <button class="oe_link" special="cancel" string="Cancelar"/>
                    </footer>
                </form>
            </field>
        </record>
        <act_window id="action_website_support_inventory_purchase"
                    key2="client_action_multi"
                    name="Crear orden de compra"
                    res_model="website.support.inventory.purchase"
                    src_model="website.support.inventory"
                    target="new"
                    view_mode="form"/>

<!-- EQUIPOS -->
        <record id="website_support_equipment_view_form" model="ir.ui.view">
            <field name="name">website.support.equipment.form</field>
            <field name="model">website.support.equipment</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <div>
                            <field name="imagen" widget="image" class="oe_avatar"/>
                            <div class="oe_title">
                                <p>
                                    <h2><field name="name" placeholder="Equipo" required="1"/></h2>
                                    <br/>
                                    <label for="category_id"/>
                                    <field name="category_id" placeholder="Area"/>
                                </p>
                            </div>
                        </div>
                        <group string="Complementos">
                            <div>
                                <field name="complement_ids"/>
                            </div>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        
        <record id="website_support_equipment_view_tree" model="ir.ui.view">
            <field name="name">website.support.equipment.tree.view</field>
            <field name="model">website.support.equipment</field>
            <field name="arch" type="xml">
                <tree string="Equipos">
                    <field name="name"/>
                </tree>
            </field>
        </record>

        <record id="website_support_equipment_view_kandan" model="ir.ui.view">
            <field name="name">website.support.equipment.kanban.view</field>
            <field name="model">website.support.equipment</field>
            <field name="arch" type="xml">
                <kanban class="o_res_partner_kanban">
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click">
                                <div class="o_kanban_image">
                                    <img t-att-src="kanban_image('website.support.equipment', 'imagen', record.id.value)"/>
                                </div>
                                <div class="oe_kanban_details">
                                    <strong class="oe_partner_heading"><field name="name"/></strong>
                                    <ul><strong>Area: <field name="category_id"/></strong></ul>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="website_support_equipment_action" model="ir.actions.act_window">
            <field name="name">Equipos</field>
            <field name="res_model">website.support.equipment</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="help" type="html">
                <p>No se encontro equipos</p>
            </field>
        </record>

<!-- COMPLEMENTO -->
        <record id="website_support_complement_view_form" model="ir.ui.view">
            <field name="name">website.support.complement.form</field>
            <field name="model">website.support.complement</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <div>
                            <field name="imagen" widget="image" class="oe_avatar"/>
                            <div class="oe_title">
                                <p>
                                    <h2><field name="name" placeholder="Complemento" required="1"/></h2>
                                    <br/>
                                    <label for="equipment_id"/>
                                    <field name="equipment_id"/>
                                </p>
                            </div>
                        </div>
                        <group string="Refacciones">
                            <div>
                                <field name="product_ids"/>
                            </div>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="website_support_complement_view_tree" model="ir.ui.view">
            <field name="name">website.support.complement.tree</field>
            <field name="model">website.support.complement</field>
            <field name="arch" type="xml">
                <tree string="Complementos">
                    <field name="name"/>
                    <field name="equipment_id"/>
                </tree>
            </field>
        </record>

        <record id="website_support_complement_view_kandan" model="ir.ui.view">
            <field name="name">website.support.complement.kanban.view</field>
            <field name="model">website.support.complement</field>
            <field name="arch" type="xml">
                <kanban class="o_res_partner_kanban">
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click">
                                <div class="o_kanban_image">
                                    <img t-att-src="kanban_image('website.support.complement', 'imagen', record.id.value)"/>
                                </div>
                                <div class="oe_kanban_details">
                                    <strong class="oe_partner_heading"><field name="name"/></strong>
                                    <ul><strong>Equipo: <field name="equipment_id"/></strong></ul>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="website_support_complement_action" model="ir.actions.act_window">
            <field name="name">Complementos</field>
            <field name="res_model">website.support.complement</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="help" type="html">
                <p>No se encontro equipos</p>
            </field>
        </record>
<!-- REGISTRO DE ENTRADA A INVENTARIO -->
        <record id="website_support_inventory_input_view_form" model="ir.ui.view">
            <field name="name">website.support.inventory.input.form</field>
            <field name="model">website.support.inventory.input</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <field name="product_id" invisible="1"/>
                        <field name="quantity"/>
                        <field name="date"/>
                        <field name="note"/>
                    </group>
                    <footer>
                        <button string="Registrar" class="oe_highlight oe_edit_only" name="save" type="object"/>
                        <button string="Cancelar" class="oe_highlight oe_edit_only" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>
        <record id="website_support_inventory_input_view_action" model="ir.actions.act_window">
            <field name="name">website.support.inventory.input.action</field>
            <field name="res_model">website.support.inventory.input</field>
            <field name="view_mode">tree</field>
        </record>
        <record id="website_support_inventory_input_view_tree" model="ir.ui.view">
            <field name="name">website.support.invetory.input.tree</field>
            <field name="model">website.support.inventory.input</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="date"/>
                    <field name="quantity"/>
                    <field name="product_id" invisible="1"/>
                    <field name="note"/>
                </tree>
            </field>
        </record>

<!-- REGISTRO TRANSFERENCIAS DE INVENTARIO -->
        <record id="website_support_inventory_transfer_view_form" model="ir.ui.view">
            <field name="name">website.support.inventory.transfer.form</field>
            <field name="model">website.support.inventory.transfer</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <field name="product_id" invisible="1"/>
                        <field name="transfer_id"/>
                        <field name="quantity"/>
                        <field name="folio"/>
                        <field name="date"/>
                        <field name="note"/>
                    </group>
                    <footer>
                        <button string="Registrar" class="oe_highlight oe_edit_only" name="save" type="object"/>
                        <button string="Cancelar" class="oe_highlight oe_edit_only" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>
        <record id="website_support_inventory_transfer_view_action" model="ir.actions.act_window">
            <field name="name">website.support.inventory.transfer.action</field>
            <field name="res_model">website.support.inventory.transfer</field>
            <field name="view_mode">tree</field>
        </record>
        <record id="website_support_inventory_input_view_tree" model="ir.ui.view">
            <field name="name">website.support.invetory.transfer.tree</field>
            <field name="model">website.support.inventory.transfer</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="date"/>
                    <field name="quantity"/>
                    <field name="product_id" invisible="1"/>
                    <field name="note"/>
                </tree>
            </field>
        </record>

<!-- EXTINTORES -->
        <!-- <record id="website_support_extinguisher_view_form" model="ir.ui.view">
            <field name="name">website.support.extinguisher.form</field>
            <field name="model">website.support.extinguisher</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <div>
                            <field name="imagen" widget="image" class="oe_avatar"/>
                            <div class="oe_title">
                                <p>
                                    <h2><field name="name" placeholder="Equipo" required="1"/></h2>
                                    <br/>
                                    <label for="category_id"/>
                                    <field name="category_id" placeholder="Area"/>
                                </p>
                            </div>
                        </div>
                        <group string="Complementos">
                            <div>
                                <field name="complement_ids"/>
                            </div>
                        </group>
                    </sheet>
                </form>
            </field>
        </record> -->
        
        <record id="website_support_extinguisher_view_tree" model="ir.ui.view">
            <field name="name">website.support.extinguisher.tree.view</field>
            <field name="model">website.support.extinguisher</field>
            <field name="arch" type="xml">
                <tree string="Extintores" editable="buttom">
                    <field name="name"/>
                    <field name="location"/>
                    <field name="capacity"/>
                </tree>
            </field>
        </record>

        <record id="website_support_extinguisher_action" model="ir.actions.act_window">
            <field name="name">Extintores</field>
            <field name="res_model">website.support.extinguisher</field>
            <field name="view_mode">tree</field>
            <field name="help" type="html">
                <p>No se encontro extintor</p>
            </field>
        </record>

<!-- HERRAMIENTAS -->
        <record id="website_support_tools_view_form" model="ir.ui.view">
            <field name="name">website.support.tools.form</field>
            <field name="model">website.support.tools</field>
            <field name="arch" type="xml">
            	<form>
                    <header>
                        <button type="object" name="asignar" string="Asignacion" class="btn-primary" attrs="{'invisible':[('estado','=','en_uso')]}"/>
                        <!-- <button type="object" name="devolucion" string="Devolucion" class="btn-primary" attrs="{'invisible':[('estado','=','disponible')]}"/> -->
                        <field name="estado" widget="statusbar"/>
                    </header>
            		<sheet>
            			<div>
            				<field name="imagen" widget="image" class="oe_avatar"/>
            				<div class="oe_title">
            					<p>
            						<h2><field name="name" placeholder="Producto" required="1"/></h2>
            					</p>
                                <!-- <field name="asignacion_id" invisible="1"/> -->
                                <field name="indicador" invisible="1"/>
                                <table style="width:50%">
                                    <tr>
                                        <th style="text-align: center; width:30%;">Cantidad</th>
                                        <th style="text-align: center; font-size: 20px;">DISPONIBLE</th>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center; width:30%;"><field name="cantidad"/></td>
                                        <td style="text-align: center;  width:30%;"><field name="disponible"/></td>
                                    </tr>
                                </table>
                            </div>
            			</div>
                        <group>
                            <notebook>
                                <page string="Historial">
                                    <field name="asignaciones_ids" readonly="1">
                                        <tree editable="top" default_order='fecha_asignacion desc'>
                                            <field name="herramienta_id" invisible="1"/>
                                            <field name="asignado"/>
                                            <field name="area"/>
                                            <field name="fecha_asignacion"/>
                                            <field name="fecha_devolucion"/>
                                            <field name="nota"/>
                                            <button name="devolucion" string="Devolucion" type="object" class="oe_highlight" attrs="{'invisible':[('fecha_devolucion','!=', False)]}"/>
                                        </tree>
                                    </field>
                                </page>
                            </notebook>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="website_support_tools_view_kandan" model="ir.ui.view">
            <field name="name">website.support.tools.kanban.view</field>
            <field name="model">website.support.tools</field>
            <field name="arch" type="xml">
                <kanban class="o_res_partner_kanban">
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click">
                                <div class="o_kanban_image">
                                    <img t-att-src="kanban_image('website.support.tools', 'imagen', record.id.value)"/>
                                </div>
                                <div>
                                    <h3><field name="name"/></h3>
                                    <ul attrs="{'invisible':[('estado','=', 'disponible')]}"><strong><font color="red"><field name="estado"/></font></strong></ul>
                                    <ul attrs="{'invisible':[('estado','=', 'en_uso')]}"><strong><font color="green"><field name="estado"/> : <field name="disponible"/></font></strong></ul>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="website_support_tools_view_tree" model="ir.ui.view">
            <field name="name">website.support.tools.tree.view</field>
            <field name="model">website.support.tools</field>
            <field name="arch" type="xml">
                <tree string="Herramientas">
                    <field name="name"/>
                    <field name="estado"/>
                </tree>
            </field>
        </record>

        <record id="website_support_tools_action" model="ir.actions.act_window">
            <field name="name">Herramientas</field>
            <field name="res_model">website.support.tools</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="help" type="html">
                <p>No se encontro herramientas</p>
            </field>
        </record>
<!-- ASIGNAR HERRAMIENTA -->
        <record id="website_support_tools_assign_view_form" model="ir.ui.view">
            <field name="name">website.support.tools.assign.form</field>
            <field name="model">website.support.tools.assign</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <field name="herramienta_id" readonly="1"/>
                        <field name="asignado" options="{'no_create': True, 'no_create_edit':True}"/>
                        <field name="area"/>
                        <field name="fecha_asignacion"/>
                        <field name="nota"/>
                    </group>
                    <footer>
						<button name="asignar" type="object" class="btn-primary" string="Asignar"/>
                        <button name="cancelar" type="object" class="btn-primary" string="Cancelar"/>
					</footer>
                </form>
            </field>
        </record>

        <record id="website_support_tools_return_view_form" model="ir.ui.view">
            <field name="name">website.support.tools.return.form</field>
            <field name="model">website.support.tools.assign</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <field name="herramienta_id" readonly="1"/>
                        <field name="asignado" readonly="1"/>
                        <field name="area" readonly="1"/>
                        <field name="fecha_asignacion" readonly="1"/>
                        <field name="fecha_devolucion"/>
                        <field name="nota"/>
                    </group>
                    <footer>
						<button name="save" type="object" class="btn-primary" string="Devolver"/>
                        <button name="cancelar" type="object" class="btn-primary" string="Cancelar"/>
					</footer>
                </form>
            </field>
        </record>
    </data>
</odoo>